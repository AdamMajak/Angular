<h2>Players</h2>

<div class="actions">
  <h3>Add Player</h3>
  <label>Nickname:
    <input [field]="playerForm.nickname" placeholder="Player nickname">
  </label>
    <label>XP:
    <input type="number" [field]="playerForm.xp">
  </label>
  <button (click)="addPlayer()">Add Player</button>
</div>

<div class="filters">
  <app-search (searchChange)="onSearchChange($event)"></app-search>

  <label>Filter by Level:
    <select [value]="selectedLevel()" (change)="onLevelChange($any($event.target).value)">
      <option value="">All</option>
      @for (l of [ 'Novice','Apprentice','Adept','Expert','Master','Grandmaster','Legend','Mythic','Immortal','Eternal']; track l) {
        <option>{{ l }}</option>
      }
    </select>
  </label>
</div>

<ul>
  @if(filteredPlayers().length > 0) {
    @for(p of filteredPlayers(); track trackById($index, p)) {
      <li>
        <span (click)="goToPlayer(p.id)">
          <strong>{{ p.nickname }}</strong> â€” Level: {{ getPlayerLevel(p).title }} (XP: {{ p.xp }})
        </span>
        <button (click)="deletePlayer(p.id, $event)">Delete</button>
      </li>
      } @empty {
      <p>No players found.</p>
    }
  }
</ul>
